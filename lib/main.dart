import 'package:flutter/foundation.dart';
import 'package:flutter/material.dart';
import 'package:flutter_conch_plugin/annotation/patch_scope.dart';
import 'package:gsy_flutter_demo/widget/align_demo_page.dart';
import 'package:gsy_flutter_demo/widget/anim_bg_demo_page.dart';
import 'package:gsy_flutter_demo/widget/anim_bubble_gum.dart';
import 'package:gsy_flutter_demo/widget/anim_button/anim_button_demo_page.dart';
import 'package:gsy_flutter_demo/widget/anim_progress_img_demo_page.dart';
import 'package:gsy_flutter_demo/widget/anim_scan_demo_page.dart';
import 'package:gsy_flutter_demo/widget/anim_text_demo_page.dart';
import 'package:gsy_flutter_demo/widget/anim_tip_demo_page.dart';
import 'package:gsy_flutter_demo/widget/anima_demo_page.dart';
import 'package:gsy_flutter_demo/widget/anima_demo_page2.dart';
import 'package:gsy_flutter_demo/widget/anima_demo_page4.dart';
import 'package:gsy_flutter_demo/widget/anima_demo_page5.dart';
import 'package:gsy_flutter_demo/widget/animation_container_demo_page.dart';
import 'package:gsy_flutter_demo/widget/arc_seek_bar_demo_page.dart';
import 'package:gsy_flutter_demo/widget/blur_demo_page.dart';
import 'package:gsy_flutter_demo/widget/book_page/book_page.dart';
import 'package:gsy_flutter_demo/widget/bottom_anim_nav_page.dart';
import 'package:gsy_flutter_demo/widget/bubble/bubble_demo_page.dart';
import 'package:gsy_flutter_demo/widget/canvas_click_demo_page.dart';
import 'package:gsy_flutter_demo/widget/card_item_page.dart';
import 'package:gsy_flutter_demo/widget/chat_list_scroll_demo_page.dart';
import 'package:gsy_flutter_demo/widget/chat_list_scroll_demo_page_2.dart';
import 'package:gsy_flutter_demo/widget/clip_demo_page.dart';
import 'package:gsy_flutter_demo/widget/color_progress_demo_page.dart';
import 'package:gsy_flutter_demo/widget/controller_demo_page.dart';
import 'package:gsy_flutter_demo/widget/custom_multi_render_demo_page.dart';
import 'package:gsy_flutter_demo/widget/custom_pull/refrsh_demo_page3.dart';
import 'package:gsy_flutter_demo/widget/custom_sliver/scroll_header_demo_page.dart';
import 'package:gsy_flutter_demo/widget/custom_viewport/custom_viewport_page.dart';
import 'package:gsy_flutter_demo/widget/drag_img_demo_page.dart';
import 'package:gsy_flutter_demo/widget/drop_select_menu/drop_select_demo_page.dart';
import 'package:gsy_flutter_demo/widget/floating_touch_demo_page.dart';
import 'package:gsy_flutter_demo/widget/gradient_text_demo_page.dart';
import 'package:gsy_flutter_demo/widget/honor_demo_page.dart';
import 'package:gsy_flutter_demo/widget/index_stack_drag_card_demo_page.dart';
import 'package:gsy_flutter_demo/widget/index_stack_drag_card_demo_page2.dart';
import 'package:gsy_flutter_demo/widget/input_bottom_demo_page.dart';
import 'package:gsy_flutter_demo/widget/keyboard_demo_page.dart';
import 'package:gsy_flutter_demo/widget/link_sliver/link_sliver_demo_page.dart';
import 'package:gsy_flutter_demo/widget/list_anim/list_anim_demo_page.dart';
import 'package:gsy_flutter_demo/widget/list_anim_2/list_anim_demo_page.dart';
import 'package:gsy_flutter_demo/widget/matrix_custom_painter_page.dart';
import 'package:gsy_flutter_demo/widget/overflow_image_page.dart';
import 'package:gsy_flutter_demo/widget/particle/particle_page.dart';
import 'package:gsy_flutter_demo/widget/positioned_demo_page.dart';
import 'package:gsy_flutter_demo/widget/refrsh_demo_page.dart';
import 'package:gsy_flutter_demo/widget/refrsh_demo_page2.dart';
import 'package:gsy_flutter_demo/widget/rich_text_demo_page.dart';
import 'package:gsy_flutter_demo/widget/rich_text_demo_page2.dart';
import 'package:gsy_flutter_demo/widget/route_demo_page.dart';
import 'package:gsy_flutter_demo/widget/scroll_inner_content_demo_page.dart';
import 'package:gsy_flutter_demo/widget/scroll_listener_demo_page.dart';
import 'package:gsy_flutter_demo/widget/scroll_to_index_demo_page.dart';
import 'package:gsy_flutter_demo/widget/scroll_to_index_demo_page2.dart';
import 'package:gsy_flutter_demo/widget/silder_verify_page.dart';
import 'package:gsy_flutter_demo/widget/sliver_list_demo_page.dart';
import 'package:gsy_flutter_demo/widget/sliver_stick_demo_page.dart';
import 'package:gsy_flutter_demo/widget/sliver_tab/sliver_tab_demo_page3.dart';
import 'package:gsy_flutter_demo/widget/sliver_tab_demo_page.dart';
import 'package:gsy_flutter_demo/widget/sliver_tab_demo_page2.dart';
import 'package:gsy_flutter_demo/widget/statusbar_demo_page.dart';
import 'package:gsy_flutter_demo/widget/stick_sliver_list_demo_page.dart';
import 'package:gsy_flutter_demo/widget/tag_demo_page.dart';
import 'package:gsy_flutter_demo/widget/text_line_height_demo_page.dart';
import 'package:gsy_flutter_demo/widget/text_size_demo_page.dart';
import 'package:gsy_flutter_demo/widget/tick_click_demo_page.dart';
import 'package:gsy_flutter_demo/widget/transform_demo_page.dart';
import 'package:gsy_flutter_demo/widget/verification_code_input_demo_page.dart';
import 'package:gsy_flutter_demo/widget/verification_code_input_demo_page2.dart';
import 'package:gsy_flutter_demo/widget/viewpager_demo_page.dart';
import 'package:gsy_flutter_demo/widget/wrap_content_page.dart';
import 'package:gsy_flutter_demo/widget/shader_canvas_demo_page.dart';
import 'package:gsy_flutter_demo/widget/anim_switch_layout_demo_page.dart';
import 'package:gsy_flutter_demo/widget/vp_list_demo_page.dart';
import 'package:gsy_flutter_demo/widget/card_perspective_demo_page.dart';
import 'package:gsy_flutter_demo/widget/card_3d_demo_page.dart';
import 'package:gsy_flutter_demo/widget/card_real_3d_demo_page.dart';
import 'package:gsy_flutter_demo/widget/anim_juejin_logo_demo_page.dart';
import 'package:gsy_flutter_demo/widget/dash_3d_demo_page.dart';
import 'package:gsy_flutter_demo/widget/png_shadow_demo_page.dart';
import 'package:gsy_flutter_demo/widget/transform_canvas_demo_page.dart';
import 'package:gsy_flutter_demo/widget/juejin_3d_logo_demo_page.dart';
import 'package:gsy_flutter_demo/widget/juejin_3d_box_logo_demo_page.dart';
import 'package:gsy_flutter_demo/widget/custom_shader_path_demo_page.dart';
import 'package:gsy_flutter_demo/widget/list_link_bottomsheet_demo_page.dart';
import 'package:gsy_flutter_demo/widget/demo_draggable_sheet_stick_page.dart';
import 'package:gsy_flutter_demo/widget/async_to_sync_call_page.dart';
import 'package:gsy_flutter_demo/widget/star_bomb_button_page.dart';
import 'package:gsy_flutter_demo/widget/photo_gallery_demo_page.dart';
import 'package:gsy_flutter_demo/widget/tear_text_demo_page.dart';
import 'package:gsy_flutter_demo/widget/pageview_in_pageview_demo_page.dart';
import 'package:gsy_flutter_demo/widget/gesture_password/gesture_password_demo_page.dart';

void main() {
  runApp(const MyApp());
  WidgetsBinding.instance.addObserver(ReferrerObserver());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'GSY Flutter Demo',
      theme: ThemeData(
        useMaterial3: true,
        primarySwatch: Colors.blue,
        textButtonTheme: const TextButtonThemeData(
          style: ButtonStyle(splashFactory: NoSplash.splashFactory),
        ),
      ),
      home: const MyHomePage(title: 'GSY Flutter Demo'),
    );
  }
}

class MyHomePage extends StatefulWidget {
  const MyHomePage({super.key, this.title});

  final String? title;

  // 将路由表移入MyHomePage作为静态属性
  static final Map<String, WidgetBuilder> routers = {
    "文本输入框简单的 Controller": (context) => ControllerDemoPage(),
    "实现控件圆角不同组合": (context) => ClipDemoPage(),
    "列表滑动监听": (context) => ScrollListenerDemoPage(),
    "滑动到指定位置": (context) => ScrollToIndexDemoPage(),
    "滑动到指定位置2": (context) => ScrollToIndexDemoPage2(),
    "展示渐变带边框的文本": (context) => GradientTextDemoPage(),
    "Transform 效果展示": (context) => TransformDemoPage(),
    "计算另类文本行间距展示": (context) => TextLineHeightDemoPage(),
    "简单上下刷新": (context) => RefreshDemoPage(),
    "简单上下刷新2": (context) => RefreshDemoPage2(),
    "简单上下刷新3": (context) => RefreshDemoPage3(),
    "通过绝对定位布局": (context) => PositionedDemoPage(),
    "气泡提示框": (context) => BubbleDemoPage(),
    "Tag效果展示": (context) => TagDemoPage(),
    "共享元素跳转效果": (context) => HonorDemoPage(),
    "滑动验证": (context) => SlideVerifyPage(),
    "warpContent实现": (context) => WrapContentPage(),
    "状态栏颜色修改（仅 App）": (context) => StatusBarDemoPage(),
    "键盘弹出与监听（仅 App）": (context) => KeyBoardDemoPage(),
    "控件动画组合展示（旋转加放大圆）": (context) => AnimaDemoPage(),
    "控件展开动画效果": (context) => AnimaDemoPage2(),
    "全局悬浮按键效果": (context) => FloatingTouchDemoPage(),
    "全局设置字体大小": (context) => TextSizeDemoPage(),
    "旧版实现富文本": (context) => RichTextDemoPage(),
    "官方实现富文本": (context) => RichTextDemoPage2(),
    "第三方 viewpager 封装实现": (context) => ViewPagerDemoPage(),
    "列表滑动过程控件停靠效果": (context) => SliverListDemoPage(),
    "验证码输入框": (context) => VerificationCodeInputDemoPage(),
    "验证码输入框2": (context) => VerificationCodeInputDemoPage2(),
    "自定义布局展示效果": (context) => CustomMultiRenderDemoPage(),
    "列表滑动停靠效果2 （Stick": (context) => SliverStickListDemoPage(),
    "键盘顶起展示（仅 App）": (context) => InputBottomDemoPage(),
    "Blur 高斯模糊效果": (context) => BlurDemoPage(),
    "控件动画变形效果": (context) => AnimationContainerDemoPage(),
    "时钟动画绘制展示": (context) => TickClickDemoPage(),
    "按键切换动画效果": (context) => AnimaDemoPage4(),
    "列表滑动过程 item 停靠动画效果": (context) => ListAnimDemoPage(),
    "列表滑动过程 item 停靠动画效果2": (context) => ListAnimDemoPage2(),
    "下弹筛选展示效果": (context) => DropSelectDemoPage(),
    "文本弹出动画效果": (context) => AnimaDemoPage5(),
    "强大的自定义滑动与停靠结合展示": (context) => ScrollHeaderDemoPage(),
    "自定义列表内sliver渲染顺序": (context) => CustomViewportPage(),
    "点击弹出动画提示": (context) => AnimTipDemoPage(),
    "列表停靠展开+回到当前头部": (context) => StickSliverListDemoPage(),
    "使用 overflow 处理图片": (context) => OverflowImagePage(),
    "展示 Align 排布控件": (context) => AlignDemoPage(),
    "通过不同尺寸计算方式展示比例": (context) => CardItemPage(),
    "多列表+顶部Tab效果展示": (context) => SliverTabDemoPage(),
    "多列表+顶部Tab效果展示2": (context) => SliverTabDemoPage2(),
    "多列表+顶部Tab效果展示3": (context) => SliverTabDemoPage3(),
    "仿真书本翻页动画（仅APP）": (context) => BookPage(),
    "粒子动画效果": (context) => ParticlePage(),
    "动画背景效果": (context) => AnimBgDemoPage(),
    "手势效果": (context) => MatrixCustomPainterDemo(),
    "一个有趣的底部跟随和停靠例子": (context) => ScrollInnerContentDemoPage(),
    "一个有趣的圆形选择器": (context) => BottomAnimNavPage(),
    "一个类似探探堆叠卡片例子": (context) => IndexStackDragCardDemoPage(),
    "一个类似探探堆叠卡片例子2": (context) => IndexStackDragCardDemoPage2(),
    "动画按键例子": (context) => AnimButtonDemoPage(),
    "类似QQ发送图片的动画": (context) => AnimProgressImgDemoPage(),
    "类似探探扫描的动画效果": (context) => AnimScanDemoPage(),
    "圆弧形的 SeekBar（仅APP）": (context) => ArcSeekBarDemoPage(),
    "一个国外友人很惊艳的动画效果": (context) => AnimBubbleGumDemoPage(),
    "纯 Canvas 绘制闹钟": (context) => CanvasClickDemoPage(),
    "类似 boss 直聘我的页面联动效果": (context) => LinkSliverDemoPage(),
    "结合 Matrix 的拖拽": (context) => DragImgDemoPage(),
    "彩色进度条": (context) => ColorProgressDemoPage(),
    "第三方的动画字体": (context) => AnimTextDemoPage(),
    "首尾添加数据不会抖动": (context) => ChatListScrollDemoPage(),
    "首尾添加数据不会抖动2": (context) => ChatListScrollDemoPage2(),
    "测试路由嵌套": (context) => RouteDemoPage(),
    "测试 canvas 阴影": (context) => ShaderCanvasDemoPage(),
    "控件动画切换效果": (context) => AnimSwitchLayoutDemoPage(),
    "ListView 嵌套 ViewPager 解决斜着滑动问题": (context) => VPListView(),
    "垂直  ViewPager 嵌套垂直 ListView ": (context) => VPNestListView(),
    "垂直  ListView 嵌套垂直  ViewPager": (context) => ListViewNestVP(),
    "垂直  ListView 联动  ListView": (context) => ListViewLinkListView(),
    "3D 透视卡片": (context) => CardPerspectiveDemoPage(),
    "3D 卡片旋转": (context) => Card3DDemoPage(),
    "硬核 3D 卡片旋转": (context) => CardReal3DDemoPage(),
    "3D Dash": (context) => Dash3dDemoPage(),
    "展示 canvas transform": (context) => TransformCanvasDemoPage(),
    "rive 掘金 logo": (context) => AnimJueJinLogoDemoPage(),
    "掘金 3d logo": (context) => JueJin3DLogoDemoPage(),
    "掘金更 3d logo": (context) => JueJin3DBoxLogoDemoPage(),
    "png shadow": (context) => PngShadowDemoPage(),
    "path 路径 png 效果": (context) => CustomShaderPathDemoPage(),
    "列表联动 BottomSheet 效果": (context) => ListLinkBottomSheetDemoPage(),
    "DraggableSheet 的 stick 效果": (context) => DemoDraggableSheetStickPage(),
    "异步调用的顺序执行": (context) => AsyncToSyncCallPage(),
    "点击爆炸的五角星（ChatGPT 生成代码）": (context) => StarBombButtonPage(),
    "有趣画廊": (context) => PhotoGalleryDemoPage(),
    "有趣的文本撕裂动画": (context) => TearTextDemoPage(),
    "PageView嵌套PageView": (context) => PageViewInPageViewDemoPage(),
    "手势密码": (context) => GesturePasswordDemoPage(),
  };

  @override
  MyHomePageState createState() => MyHomePageState();
}

class ReferrerObserver with WidgetsBindingObserver {
  @override
  Future<bool> didPushRouteInformation(
      RouteInformation routeInformation) async {
    if (kDebugMode) {
      print("didPushRouteInformation ${routeInformation.uri}");
    }
    return false;
  }
}

class MyHomePageState extends State<MyHomePage> {
  @override
  void initState() {
    super.initState();
  }

  @override
  Widget build(BuildContext context) {
    var routeLists = MyHomePage.routers.keys.toList();
    return Scaffold(
      appBar: AppBar(
        title: Text(widget.title ?? 'GSY Flutter Demo'),
      ),
      body: ListView.builder(
        itemBuilder: (context, index) {
          return InkWell(
            onTap: () {
              Navigator.of(context).push(
                MaterialPageRoute(
                  builder: MyHomePage.routers[routeLists[index]]!,
                ),
              );
            },
            child: Card(
              child: Container(
                alignment: Alignment.centerLeft,
                margin: const EdgeInsets.symmetric(horizontal: 10),
                height: 50,
                child: Text(routeLists[index]),
              ),
            ),
          );
        },
        itemCount: MyHomePage.routers.length,
      ),
    );
  }
}

enum Cat {
  black(1),
  white(2);
  const Cat(this.value);

  final int value;
}

extension CatExtension on Cat {
  void talk() {
    if (kDebugMode) {
      print('meow');
    }
  }
}



